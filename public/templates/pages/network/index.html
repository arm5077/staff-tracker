<div id="network">


	<div class="header" header>
		<div class="social">
			<i class="fa fa-arrow-circle-left" back-button></i>
			<a href="#/"><i class="fa fa-home"></i></a>
		</div>
		
		<div class="title">
			<strong>TwentySixteen</strong> campaign staffer tracker
		</div>
		
		<div class ="portrait">
			<img ng-src="/img/{{ name.substr(name.indexOf(' ')+1,100) }}.png" />
		</div>
		
		<div class = "info">
			<div class = "info-label">Fast stats:</div>
			<div class="item">
				<div class="label">
					Staffers we're tracking
				</div>
				<div class="data">
					{{ years[0].employers[0].staffers.length }}
				</div>
			</div>
			<div class="item">
				<div style="display:inline-block">
					<div class="label">
						Most common previous job
					</div>
					<div class="data formerEmployer" ng-repeat="name in biggestEmployer.split(' ')">
						{{ name }}
					</div>
				</div>
			</div>
		</div>
		
	</div>

	<div class = "list" ng-class="{ hidden: showList == false }" scroll-watch="{from: 0, to: 2000}" sw-class="{floating: $positive >= headerHeight}" >
		<div class="explainer">
			<div class="title">Tracked staffers {{name}} 2016</div>
			Click a staffer's name to highlight their experience on the timeline, or select <i class="fa fa-list-alt"></i> to see more details about them. 
		</div>
		<ul>
			<li ng-repeat="staffer in staff" ng-mouseover="filterCountsByName(staffer.name);" ng-mouseout="filterCountsByLastSelected()" ng-class="{selected: staffer.selected == true}" ng-click="toggleSelected(staffer)">
				{{ staffer.name }}
				<a ng-href="#/staffer/{{staffer.name}}" ><i class="fa fa-list-alt"></i></a>
			</li>
		</ul>
		<div class="clear" ng-show="staff != fullList" ng-click="clearEmployerSelection(); previouslySelected.length = 0; staff = fullList;">Clear selection</div>
		<div class="spacer"></div>
	</div>

	
	<div class = "network" ng-class="{ partial: showList == true }">



		
		<div class="year" ng-repeat="year in years" ng-click="">
			<div label class="label">{{ year.year }}</div>
			
			<div class="clusters" ng-if="year.employers.filter(filterClusters).length > 0" ng-class="{centered: year.employers.filter(filterSingles).length == 0 }">
				<div class="infobox" ng-if="$index==1  && hint == true">
					<table><tr><td>
						This means <strong>{{year.employers[0].staffers.length}}</strong> of {{name}}'s current staffers worked for <strong>{{year.employers[0].employer}}</strong> in <strong>{{year.year}}</strong>.
						<div>
							<div class = "dismiss" ng-click="$parent.hint=false">Ok, got it</div>
						</div>
					</td>
					<td>
						<i class="fa fa-arrow-right"></i>
					</td></tr></table>
				</div>
				<div class="employer" ng-repeat="employer in year.employers" ng-if="employer.staffers.length > 1" ng-class="{selected: employer.selected == true, faded: employer.selected == false }">
					<a  ng-if="year.year == 2016" ng-href="#/network/{{ employer.employer }}">
						<div class = "count">{{ employer.staffers.length }}</div>
						<div class = "name">{{ employer.employer }}</div>
					</a>
					<a  ng-if="year.year != 2016" ng-href="#/organization/{{ employer.employer }}">
						<div class = "count">{{ employer.staffers.length }}</div>
						<div class = "name">{{ employer.employer }}</div>
					</a>
				</div>
			
			</div>
			
			<div class="singles" ng-if="year.employers.filter(filterSingles).length > 0" ng-class="{centered: year.employers.filter(filterClusters).length == 0 }">
				<div class="infobox" ng-if="$index==1 && year.employers.filter(filterClusters).length == 0 && hint == true">
					<table><tr><td>This means <strong>{{year.employers.filter(filterSingles)[0].staffers.length}}</strong> of {{name}}'s current staffers worked for <strong>{{year.employers.filter(filterSingles)[0].employer}}</strong> in <strong>{{year.year}}</strong>.</td><td> <i class="fa fa-arrow-right"></i></tr></table>
				</div>
				
				<div class="employer" ng-repeat="employer in year.employers" ng-if="employer.staffers.length == 1" ng-class="{selected: employer.selected == true, faded: employer.selected == false }">
					<a ng-href="#/organization/{{ employer.employer }}">
					<table>
						<tr>
							<td class="count" ng-click="toggleListSelected(employer,year)">
								<div class="circle">1</div>
							</td>
							<td>
									<div class="name">{{ employer.employer }}</div>
							</td>
						</tr>
					</table>
					</a>
				</div>
			</div>
			
			
		
		</div>
	
	</div>
	
	<div class = "mobile">
		
		<div class = "mobile-year" ng-repeat="year in years">
			<div class="mobile-label">{{year.year }}</div>
			<div class="mobile-employer" ng-repeat="employer in year.employers">
				<div class="head">
					<!-- If this is the first result (ie, the current candidate), deactivate org page link -->
					<a ng-if="$parent.$index==0">
						<div class="mobile-count">{{ employer.staffers.length }}</div>
						<div class="mobile-name">{{employer.employer}}</div>
					</a>
					<a ng-if="$parent.$index > 0" ng-href="#/organization/{{ employer.employer }}">
						<div class="mobile-count">{{ employer.staffers.length }}</div>
						<div class="mobile-name">{{employer.employer}}</div>
					</a>
					
					<div class="mobile-toggle" ng-click="employer.mobileShow = !employer.mobileShow"><i class="fa" ng-class="{ 'fa-minus-circle': employer.mobileShow, 'fa-plus-circle': !employer.mobileShow}"></i></div>
				</div>
				<div class="mobile-employees" ng-class="{show: employer.mobileShow }" >
					<a ng-href="#/staffer/{{staffer}}" ng-repeat="staffer in employer.staffers">
						<div class="mobile-employee" >
							{{staffer}}
						</div>
					</a>
				</div>
			</div>
		</div>

	</div>

</div>